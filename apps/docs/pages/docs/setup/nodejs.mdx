import { Steps } from "nextra-theme-docs";

# Triplex with Node.js

## System Requirements

- [Node.js 18.16.0](https://nodejs.org/) or newer
- MacOS and Windows are supported

## Automatic Setup

We recommend initializing Triplex with the CLI which sets everything up for you,
including when ran in pre-existing repositories. To initialize, run:

```bash
npx @triplex/run@latest init
```

And follow the prompts. Triplex will initialize a
[TypeScript](https://www.typescriptlang.org/) project with some examples to get
you started.

After the initialization is complete:

- Run `npm run editor --open ./src/scene.tsx` to start and open the editor
- Edit a component in `src/scene.tsx` and see the updated result in your browser
- Edit a component in the editor and see the updated result in your code

## Manual Setup

<Steps>

### Install dependencies

Install `@triplex/run`, `react`, `@types/react`, `three`, `@types/three`, and
`@react-three/fiber` in your project.

```
npm install @triplex/run react @types/react three @types/three @react-three/fiber
```

### Add scripts

Open `package.json` and add the following script:

```json
"scripts": {
  "editor": "triplex editor"
}
```

### Configure TypeScript

Open or create a `tsconfig.json` and add the following:

```json
{
  "compilerOptions": {
    "baseUrl": ".",
    "esModuleInterop": true,
    "forceConsistentCasingInFileNames": true,
    "incremental": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "lib": ["dom", "dom.iterable", "es2022"],
    "module": "esnext",
    "moduleResolution": "node",
    "noEmit": true,
    "resolveJsonModule": true,
    "skipLibCheck": true,
    "strict": true,
    "types": ["@react-three/fiber"]
  },
  "include": ["."],
  "exclude": ["node_modules"]
}
```

### Configure Triplex

Create a `.triplex/config.json` file and add the following:

```json
{
  "components": ["../src/components/**/*.tsx"],
  "files": ["../src/**/*.tsx"]
}
```

### Add an example

Create an example file `src/scene.tsx` and add the following:

```tsx
export default function Scene() {
  return (
    <mesh>
      <boxGeometry args={[1, 1, 1]} />
      <meshStandardMaterial color="red" />
    </mesh>
  );
}
```

</Steps>

After the set up is complete:

- Run `npm run editor --open ./src/scene.tsx` to start and open the editor
- Edit a component in `src/scene.tsx` and see the updated result in your browser
- Edit a component in the editor and see the updated result in your code

## Common questions
